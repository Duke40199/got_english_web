{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","api/APIKit.js","api/user.js","api/login.js","views/pages/login/Login.js"],"names":["_slicedToArray","arr","i","Array","isArray","Symbol","iterator","Object","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","value","length","err","unsupportedIterableToArray","TypeError","_unsupportedIterableToArray","o","minLen","n","prototype","toString","call","slice","constructor","name","from","test","_arrayLikeToArray","len","arr2","APIKit","axios","create","baseURL","timeout","setClientToken","token","interceptors","request","use","config","headers","Authorization","GetUserInfoAPI","username","a","JSON","parse","localStorage","getItem","userInfo","onSuccess","data","onFailure","error","console","log","get","params","then","catch","GetModeratorInfoListAPI","moderatorInfoList","role","UpdateUserInfoByUserIdAPI","userID","updateInfoJson","updateResult","response","success","put","LoginAPI","userInput","result","userData","errorMessage","status","post","Login","useState","setUsername","password","setPassword","setUser","setError","history","useHistory","onPressLogin","e","preventDefault","email","loginResult","setItem","stringify","className","md","onSubmit","type","placeholder","required","onChange","target","color","xs","style","width","to","active","tabIndex"],"mappings":"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","file":"static/js/11.417eafc2.chunk.js","sourcesContent":["import arrayWithHoles from \"@babel/runtime/helpers/esm/arrayWithHoles\";\nimport iterableToArrayLimit from \"@babel/runtime/helpers/esm/iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableRest from \"@babel/runtime/helpers/esm/nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","// import axios from 'axios';\r\n\r\n// let APIKit = axios.create({\r\n//     baseURL: process.env.BACKEND_URL,\r\n//     timeout: 10000\r\n// })\r\n\r\n// export default APIKit;\r\n\r\nimport axios from 'axios';\r\n\r\n// Create axios client, pre-configured with baseURL\r\nlet APIKit = axios.create({\r\n  baseURL: 'https://got-english-backend-production-swiyh5bc4q-de.a.run.app',\r\n  timeout: 10000,\r\n});\r\n\r\n// Set JSON Web Token in Client to be included in all calls\r\nexport const setClientToken = token => {\r\n  APIKit.interceptors.request.use(function (config) {\r\n    config.headers.Authorization = `Bearer ${token}`;\r\n    return config;\r\n  });\r\n};\r\n\r\nexport default APIKit;","import APIKit, { setClientToken } from './APIKit';\r\n\r\nexport const GetUserInfoAPI = async (username) => {\r\n    const token = (JSON.parse(localStorage.getItem(\"user\"))).token;\r\n    let userInfo = null;\r\n    const onSuccess = data => {\r\n        //only first data\r\n        userInfo = data.data.data[0];\r\n    }\r\n\r\n    const onFailure = error => {\r\n        console.log(error);\r\n    }\r\n\r\n    setClientToken(token);\r\n\r\n    await APIKit.get('/accounts', {\r\n        params: {\r\n            username: username,\r\n        }\r\n    })\r\n        .then(onSuccess)\r\n        .catch(onFailure);\r\n\r\n    return userInfo;\r\n}\r\n\r\nexport const GetModeratorInfoListAPI = async () => {\r\n    const token = (JSON.parse(localStorage.getItem(\"user\"))).token;\r\n    let moderatorInfoList = null;\r\n    const onSuccess = data => {\r\n        moderatorInfoList = data.data.data;\r\n    }\r\n\r\n    const onFailure = error => {\r\n        console.log(error);\r\n    }\r\n\r\n    setClientToken(token);\r\n\r\n    await APIKit.get('/accounts', {\r\n        params: {\r\n            role: 'Moderator',\r\n        }\r\n    })\r\n        .then(onSuccess)\r\n        .catch(onFailure);\r\n\r\n    return moderatorInfoList;\r\n}\r\n\r\nexport const UpdateUserInfoByUserIdAPI = async (userID, updateInfoJson) => {\r\n    const token = (JSON.parse(localStorage.getItem(\"user\"))).token;\r\n    let updateResult = null;\r\n    const onSuccess = response => {\r\n        console.log(response.data);\r\n        updateResult = response.data.success;\r\n    }\r\n\r\n    const onFailure = error => {\r\n        console.log(error);\r\n        updateResult = false;\r\n    }\r\n\r\n    setClientToken(token);\r\n\r\n    await APIKit.put('/accounts/' + userID + '/update', updateInfoJson)\r\n        .then(onSuccess)\r\n        .catch(onFailure);\r\n\r\n    return updateResult;\r\n}\r\n\r\nexport const CreateModeratorAPI = async (moderatorInfoJson) => {\r\n    const token = (JSON.parse(localStorage.getItem(\"user\"))).token;\r\n    let createResult = null;\r\n    const onSuccess = response => {\r\n        console.log(response.data);\r\n        createResult = response.data.success;\r\n    }\r\n\r\n    const onFailure = error => {\r\n        console.log(error);\r\n        createResult = false;\r\n    }\r\n\r\n    setClientToken(token);\r\n\r\n    await APIKit.post('/accounts', moderatorInfoJson)\r\n        .then(onSuccess)\r\n        .catch(onFailure);\r\n\r\n    return createResult;\r\n}","\r\nimport APIKit, { setClientToken } from './APIKit';\r\n\r\nexport const LoginAPI = async userInput => {\r\n  let result = {\r\n    userData: null,\r\n    errorMessage: null,\r\n  };\r\n\r\n  const onSuccess = data => {\r\n    // Set JSON Web Token on success\r\n    setClientToken(data.data.data.token);\r\n    // set the state of the user\r\n    // setUser(data.data);\r\n    // store the user in localStorage\r\n    // localStorage.setItem(\"user\", JSON.stringify(data.data));\r\n    // get logged in user info\r\n    // await GetUserInfo()\r\n\r\n    //console.log(`======= LOGIN USERNAME:${user.username}`);\r\n    // history.push(\"/\");\r\n    result.userData = data.data.data;\r\n  };\r\n\r\n  const onFailure = error => {\r\n    console.log(error);\r\n    let errorMessage = \"\";\r\n    if (error.response != null) {\r\n      if (error.response.status == 403) {\r\n        errorMessage = \"Xin kiểm tra lại thông tin đăng nhập.\";\r\n      }\r\n    } else {\r\n      errorMessage = \"Đã có một lỗi bất thường xảy ra. Xin hãy liên hệ với Admin để bảo trì hệ thống.\";\r\n    }\r\n    result.errorMessage = errorMessage;\r\n  };\r\n\r\n  await APIKit.post('/login', userInput)\r\n    .then(onSuccess)\r\n    .catch(onFailure);\r\n\r\n  return result;\r\n}","import React, { useState } from 'react'\r\nimport { Link, useHistory } from 'react-router-dom'\r\nimport { LoginAPI } from '../../../api/login';\r\nimport { GetUserInfoAPI } from '../../../api/user';\r\nimport {\r\n  CButton,\r\n  CCard,\r\n  CCardBody,\r\n  CCardGroup,\r\n  CCol,\r\n  CContainer,\r\n  CForm,\r\n  CInput,\r\n  CInputGroup,\r\n  CInputGroupPrepend,\r\n  CInputGroupText,\r\n  CRow,\r\n  CAlert\r\n} from '@coreui/react'\r\nimport CIcon from '@coreui/icons-react'\r\n\r\nconst Login = () => {\r\n  //initial state\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [user, setUser] = useState();\r\n  const [error, setError] = useState();\r\n  const history = useHistory();\r\n\r\n  const onPressLogin = async e => {\r\n    e.preventDefault();\r\n\r\n    let userInput = { username, password };\r\n    const emailRegex = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n    if (emailRegex.test(username)) {\r\n      //input is email\r\n      const email = username\r\n      userInput = { email, password };\r\n    }\r\n\r\n    const loginResult = await LoginAPI(userInput);\r\n\r\n    if (loginResult.userData != null) {\r\n      // set the state of the user\r\n      setUser(loginResult.userData);\r\n      // store the user in localStorage\r\n      localStorage.setItem(\"user\", JSON.stringify(loginResult.userData));\r\n      // get logged in user detail info then store it into localStorage\r\n      const userInfo = await GetUserInfoAPI(loginResult.userData.username);\r\n      localStorage.setItem(\"userInfo\", JSON.stringify(userInfo));\r\n      // refresh but not send any HTTP request\r\n      history.push(\"/\");\r\n    } else {\r\n      setError(loginResult.errorMessage);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"c-app c-default-layout flex-row align-items-center\">\r\n      <CContainer>\r\n        <CRow className=\"justify-content-center\">\r\n          <CCol md=\"8\">\r\n            <CCardGroup>\r\n              <CCard className=\"p-4\">\r\n                <CCardBody>\r\n                  <CForm onSubmit={onPressLogin}>\r\n                    <h1>Đăng nhập</h1>\r\n                    <p className=\"text-muted\">Xin hãy điền thông tin tài khoản</p>\r\n                    <CInputGroup className=\"mb-3\">\r\n                      <CInputGroupPrepend>\r\n                        <CInputGroupText>\r\n                          <CIcon name=\"cil-user\" />\r\n                        </CInputGroupText>\r\n                      </CInputGroupPrepend>\r\n                      <CInput type=\"text\"\r\n                        placeholder=\"Email hoặc Tên Đăng Nhập\"\r\n                        required={true}\r\n                        onChange={({ target }) => setUsername(target.value)}\r\n                      />\r\n                    </CInputGroup>\r\n                    <CInputGroup className=\"mb-4\">\r\n                      <CInputGroupPrepend>\r\n                        <CInputGroupText>\r\n                          <CIcon name=\"cil-lock-locked\" />\r\n                        </CInputGroupText>\r\n                      </CInputGroupPrepend>\r\n                      <CInput type=\"password\"\r\n                        placeholder=\"Mật khẩu\"\r\n                        required={true}\r\n                        onChange={({ target }) => setPassword(target.value)}\r\n                      />\r\n                    </CInputGroup>\r\n                    {error != null ? <CAlert color=\"danger\">{error}</CAlert> : null}\r\n                    <CRow>\r\n                      <CCol xs=\"6\">\r\n                        <CButton color=\"primary\" className=\"px-4\" type=\"Submit\">Đăng Nhập</CButton>\r\n                      </CCol>\r\n                      <CCol xs=\"6\" className=\"text-right\">\r\n                        <CButton color=\"link\" className=\"px-0\">Quên mật khẩu?</CButton>\r\n                      </CCol>\r\n                    </CRow>\r\n                  </CForm>\r\n                </CCardBody>\r\n              </CCard>\r\n              <CCard className=\"text-white bg-primary py-5 d-md-down-none\" style={{ width: '44%' }}>\r\n                <CCardBody className=\"text-center\">\r\n                  <div>\r\n                    <p>Bạn chưa có tài khoản?</p>\r\n                    <Link to=\"/register\">\r\n                      <CButton color=\"primary\" className=\"mt-3\" active tabIndex={-1}>Đăng ký ngay!</CButton>\r\n                    </Link>\r\n                  </div>\r\n                </CCardBody>\r\n              </CCard>\r\n            </CCardGroup>\r\n          </CCol>\r\n        </CRow>\r\n      </CContainer>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Login\r\n"],"sourceRoot":""}
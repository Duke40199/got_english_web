(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[22],{1025:function(e,t,r){"use strict";r.r(t);var n=r(634),a=r.n(n),c=r(635),s=r(632),i=r(1),o=r(20),u=r(785),l=r(765),p=r(629),h=r(639),d=r(654),b=r(638),j=r(17);t.default=function(){var e=Object(i.useState)(""),t=Object(s.a)(e,2),r=t[0],n=t[1],f=Object(i.useState)(""),g=Object(s.a)(f,2),m=g[0],x=g[1],O=Object(i.useState)(),v=Object(s.a)(O,2),k=(v[0],v[1]),w=Object(i.useState)(null),y=Object(s.a)(w,2),I=y[0],S=y[1],N=Object(o.g)(),A=Object(b.usePromiseTracker)().promiseInProgress,D=function(){var e=Object(c.a)(a.a.mark((function e(t){var n,c,s,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,Object(b.trackPromise)(Object(d.b)(r,m));case 3:return n=e.sent,e.next=6,Object(b.trackPromise)(Object(u.b)(n));case 6:if(c=e.sent,console.log(c),null==c.userData){e.next=24;break}if("Admin"!==(s=Object(l.a)(c.userData.token).claims.role_name)&&"Moderator"!==s){e.next=21;break}return S(Object(j.jsx)(p.a,{color:"success",children:"\u0110\u0103ng nh\u1eadp th\xe0nh c\xf4ng! Xin ch\u1edd trong gi\xe2y l\xe1t..."})),k(c.userData),localStorage.setItem("user",JSON.stringify(c.userData)),e.next=16,Object(u.a)();case 16:i=e.sent,localStorage.setItem("userInfo",JSON.stringify(i)),N.go(0),e.next=22;break;case 21:S(Object(j.jsx)(p.a,{color:"danger",children:"T\xe0i kho\u1ea3n c\u1ee7a b\u1ea1n kh\xf4ng c\xf3 quy\u1ec1n truy c\u1eadp h\u1ec7 th\u1ed1ng n\xe0y!"}));case 22:e.next=25;break;case 24:S(Object(j.jsx)(p.a,{color:"danger",children:c.errorMessage}));case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsx)("div",{className:"c-app c-default-layout flex-row align-items-center",children:Object(j.jsx)(p.w,{children:Object(j.jsx)(p.ub,{className:"justify-content-center",children:Object(j.jsx)(p.u,{md:"8",children:Object(j.jsx)(p.j,{children:Object(j.jsx)(p.k,{children:Object(j.jsxs)(p.J,{onSubmit:D,children:[Object(j.jsx)("h1",{children:"\u0110\u0103ng nh\u1eadp"}),Object(j.jsx)("p",{className:"text-muted",children:"Xin h\xe3y \u0111i\u1ec1n th\xf4ng tin t\xe0i kho\u1ea3n"}),Object(j.jsxs)(p.T,{className:"mb-3",children:[Object(j.jsx)(p.V,{children:Object(j.jsx)(p.W,{children:Object(j.jsx)(h.a,{name:"cil-user"})})}),Object(j.jsx)(p.Q,{type:"email",placeholder:"Email",required:!0,onChange:function(e){var t=e.target;return n(t.value)}})]}),Object(j.jsxs)(p.T,{className:"mb-4",children:[Object(j.jsx)(p.V,{children:Object(j.jsx)(p.W,{children:Object(j.jsx)(h.a,{name:"cil-lock-locked"})})}),Object(j.jsx)(p.Q,{type:"password",placeholder:"M\u1eadt kh\u1ea9u",required:!0,onChange:function(e){var t=e.target;return x(t.value)}})]}),A?Object(j.jsx)("div",{className:"spinner-border text-primary mb-3"}):null!=I&&""!=I?I:null,Object(j.jsxs)(p.ub,{children:[Object(j.jsx)(p.u,{xs:"6",children:Object(j.jsx)(p.f,{color:"primary",className:"px-4",type:"Submit",disabled:A,children:"\u0110\u0103ng Nh\u1eadp"})}),Object(j.jsx)(p.u,{xs:"6",className:"text-right",children:Object(j.jsx)(p.f,{color:"link",className:"px-0",children:"Qu\xean m\u1eadt kh\u1ea9u?"})})]})]})})})})})})})}},644:function(e,t,r){"use strict";var n=r(671),a=r.n(n).a.create({baseURL:"https://got-english-backend-production-swiyh5bc4q-de.a.run.app",timeout:1e4});t.a=a},654:function(e,t,r){"use strict";r.d(t,"b",(function(){return o}));var n=r(634),a=r.n(n),c=r(635),s=r(770);r(767),r(768),r(769);s.a.initializeApp({apiKey:"AIzaSyB0l31PMIfIMgDceOjlcOimsHUFSccvzjU",authDomain:"gotenglish-app.firebaseapp.com",projectId:"gotenglish-app",storageBucket:"gotenglish-app.appspot.com",messagingSenderId:"392616753385",appId:"1:392616753385:web:cf70a3478c6f8ea51d5878",measurementId:"G-T0K0LB12VF"});var i=s.a.auth();s.a.analytics();var o=function(){var e=Object(c.a)(a.a.mark((function e(t,r){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.signInWithEmailAndPassword(t,r).catch((function(e){console.error("Error signing in with password and email",e)})).then(function(){var e=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t){e.next=5;break}return r=t.user,e.next=4,r.getIdTokenResult(!1);case 4:n=e.sent;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();t.a=s.a},765:function(e,t,r){"use strict";function n(e){this.message=e}n.prototype=new Error,n.prototype.name="InvalidCharacterError";var a="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new n("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,a,c=0,s=0,i="";a=t.charAt(s++);~a&&(r=c%4?64*r+a:a,c++%4)?i+=String.fromCharCode(255&r>>(-2*c&6)):0)a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a);return i};function c(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(a(e).replace(/(.)/g,(function(e,t){var r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r})))}(t)}catch(e){return a(t)}}function s(e){this.message=e}s.prototype=new Error,s.prototype.name="InvalidTokenError",t.a=function(e,t){if("string"!=typeof e)throw new s("Invalid token specified");var r=!0===(t=t||{}).header?0:1;try{return JSON.parse(c(e.split(".")[r]))}catch(e){throw new s("Invalid token specified: "+e.message)}}},785:function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"a",(function(){return o}));var n=r(634),a=r.n(n),c=r(635),s=r(644),i=function(){var e=Object(c.a)(a.a.mark((function e(t){var r,n,c,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={userData:null,errorMessage:null},void 0!==t){e.next=4;break}return r.errorMessage="Xin ki\u1ec3m tra l\u1ea1i th\xf4ng tin \u0111\u0103ng nh\u1eadp.",e.abrupt("return",r);case 4:return n=function(e){r.userData=e.data.data},c=function(e){console.log(e);var t="";null!=e.response?403===e.response.status?t="Xin ki\u1ec3m tra l\u1ea1i th\xf4ng tin \u0111\u0103ng nh\u1eadp.":401===e.response.status&&(t="T\xe0i kho\u1ea3n c\u1ee7a b\u1ea1n \u0111\xe3 b\u1ecb kh\xf3a."):t="\u0110\xe3 c\xf3 m\u1ed9t l\u1ed7i b\u1ea5t th\u01b0\u1eddng x\u1ea3y ra. Xin h\xe3y li\xean h\u1ec7 v\u1edbi Admin \u0111\u1ec3 b\u1ea3o tr\xec h\u1ec7 th\u1ed1ng.",r.errorMessage=t},i={headers:{Authorization:"Bearer ".concat(t.token)}},e.next=9,s.a.post("/login",null,i).then(n).catch(c);case 9:return e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=Object(c.a)(a.a.mark((function e(){var t,r,n,c,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(localStorage.getItem("user")).token,r=null,n=function(e){r=e.data.data},c=function(e){console.log(e)},i={headers:{Authorization:"Bearer ".concat(t)}},e.next=7,s.a.get("/profile",i).then(n).catch(c);case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=22.d24fea18.chunk.js.map